# 云开发自定义域名配置指南

## 📋 配置步骤

### 方式一：通过云开发控制台配置（推荐）

#### 1. 登录云开发控制台

访问：[云开发控制台 - 静态网站托管](https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting)

#### 2. 配置自定义域名

1. 进入"静态网站托管"页面
2. 点击"自定义域名"或"域名管理"
3. 点击"添加域名"
4. 输入域名：`juqi.life`（或你想要的域名）
5. 选择 SSL 证书：
   - 如果有现有证书，选择证书
   - 如果没有，可以：
     - 使用云开发提供的免费证书（自动申请）
     - 或上传自己的证书

#### 3. 配置 DNS 解析

在域名服务商（如腾讯云 DNS、阿里云 DNS 等）添加 CNAME 记录：

- **记录类型**：CNAME
- **主机记录**：`@`（或 `www`，如果需要 www 子域名）
- **记录值**：云开发提供的 CNAME 地址（在控制台中会显示）

#### 4. 等待生效

- DNS 解析通常需要几分钟到几小时
- SSL 证书申请可能需要几分钟
- 配置完成后，可以通过 `https://juqi.life` 访问静态网站

### 方式二：通过 MCP 工具配置（需要证书 ID）

如果你已经有 SSL 证书 ID，可以使用以下命令：

```bash
# 需要先获取证书 ID
# 然后在代码中调用 domainManagement 工具
```

**注意**：通过工具配置需要先获取证书 ID，通常从控制台获取更方便。

## 🔧 配置 Universal Links

配置完自定义域名后，需要更新以下内容：

### 1. 更新 apple-app-site-association 文件

文件内容不变，但需要通过新域名访问：
```
https://juqi.life/.well-known/apple-app-site-association
```

### 2. 更新 AppDelegate.swift

```swift
WXApi.registerApp(wechatAppID, universalLink: "https://juqi.life/app/")
```

### 3. 更新 Xcode 中的 Associated Domains

在 Xcode 的 `Signing & Capabilities` 中：
- 添加：`applinks:juqi.life`

## 📝 当前配置状态

### 已配置的内容

✅ **apple-app-site-association 文件已上传**
- 路径：`.well-known/apple-app-site-association`
- 当前访问地址：`https://prod-juqi-7glu2m8qfa31e13f-1314478640.tcloudbaseapp.com/.well-known/apple-app-site-association`
- 配置路径：`/app/*`

✅ **AppDelegate 已配置**
- Universal Link：`https://prod-juqi-7glu2m8qfa31e13f-1314478640.tcloudbaseapp.com/app/`

### 待配置的内容

⏳ **自定义域名**
- 需要在云开发控制台配置 `juqi.life` 域名
- 需要配置 DNS 解析
- 需要 SSL 证书

⏳ **Xcode Associated Domains**
- 需要在 Xcode 中添加 `applinks:prod-juqi-7glu2m8qfa31e13f-1314478640.tcloudbaseapp.com`
- 如果使用自定义域名，改为 `applinks:juqi.life`

## 🔗 相关链接

- **静态网站托管控制台**: https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting
- **域名管理**: https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting
- **当前文件访问**: https://prod-juqi-7glu2m8qfa31e13f-1314478640.tcloudbaseapp.com/.well-known/apple-app-site-association

## ⚠️ 重要提示

1. **SSL 证书**：Universal Links 必须使用 HTTPS，所以必须配置 SSL 证书
2. **DNS 解析**：配置完域名后，需要在域名服务商配置 CNAME 记录
3. **生效时间**：DNS 和 SSL 证书配置可能需要几分钟到几小时生效
4. **测试**：配置完成后，在浏览器中访问 `https://juqi.life/.well-known/apple-app-site-association` 验证文件可访问

## 🚀 快速配置（如果已有证书 ID）

如果你已经在云开发控制台配置过域名，或者有证书 ID，可以告诉我，我可以帮你通过 MCP 工具快速配置。
