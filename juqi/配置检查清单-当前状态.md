# é…ç½®æ£€æŸ¥æ¸…å• - å½“å‰çŠ¶æ€

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. URL Scheme é…ç½®
- âœ… **Info.plist** ä¸­å·²é…ç½® URL Schemes: `wxde953a2ec5493b3b`
- âœ… æ ¼å¼æ­£ç¡®ï¼ˆ`wx` + AppIDï¼‰
- âœ… Identifier è®¾ç½®ä¸º `weixin`

### 2. Universal Links é…ç½®
- âœ… **apple-app-site-association** æ–‡ä»¶å·²ä¸Šä¼ 
- âœ… **AppDelegate.swift** ä¸­ Universal Link å·²é…ç½®ä¸ºï¼š`https://juqi.life/app/`
- âœ… **Entitlements æ–‡ä»¶** å·²åˆ›å»ºï¼ˆjuqiDebug.entitlements å’Œ juqiRelease.entitlementsï¼‰

### 3. æœåŠ¡å™¨é…ç½®
- âœ… è‡ªå®šä¹‰åŸŸå `juqi.life` å·²é…ç½®
- âœ… SSL è¯ä¹¦å·²é…ç½®

## âš ï¸ éœ€è¦ç«‹å³å®Œæˆçš„é…ç½®

### 1. æ›¿æ¢ AppDelegate.swift ä¸­çš„å¾®ä¿¡ AppIDï¼ˆé‡è¦ï¼ï¼‰

**å½“å‰çŠ¶æ€**ï¼š`AppDelegate.swift` ç¬¬ 14 è¡Œè¿˜æ˜¯ `YOUR_WECHAT_APP_ID`

**éœ€è¦ä¿®æ”¹**ï¼š
```swift
// å½“å‰ï¼ˆé”™è¯¯ï¼‰ï¼š
private let wechatAppID = "YOUR_WECHAT_APP_ID"

// åº”è¯¥æ”¹ä¸ºï¼š
private let wechatAppID = "de953a2ec5493b3b"
```

**æ“ä½œæ­¥éª¤**ï¼š
1. æ‰“å¼€ `JUQI-APP/juqi/juqi/AppDelegate.swift`
2. æ‰¾åˆ°ç¬¬ 14 è¡Œ
3. å°† `YOUR_WECHAT_APP_ID` æ›¿æ¢ä¸º `de953a2ec5493b3b`
4. ä¿å­˜æ–‡ä»¶

### 2. åœ¨ Xcode ä¸­é…ç½® Associated Domainsï¼ˆé‡è¦ï¼ï¼‰

**å½“å‰çŠ¶æ€**ï¼šEntitlements æ–‡ä»¶å·²åˆ›å»ºï¼Œä½†éœ€è¦åœ¨ Xcode ä¸­æ·»åŠ å¹¶å…³è”

**æ“ä½œæ­¥éª¤**ï¼š
1. åœ¨ Xcode ä¸­æ‰“å¼€é¡¹ç›®ï¼ˆä½¿ç”¨ `juqi.xcworkspace`ï¼‰
2. é€‰æ‹©é¡¹ç›® Target `juqi`
3. é€‰æ‹© `Signing & Capabilities` æ ‡ç­¾é¡µ
4. ç‚¹å‡» `+ Capability`
5. æœç´¢å¹¶æ·»åŠ  `Associated Domains`
6. åœ¨ `Associated Domains` ä¸­ï¼Œç‚¹å‡» `+` æ·»åŠ ï¼š
   ```
   applinks:juqi.life
   ```
7. ç¡®ä¿ `juqiDebug.entitlements` å’Œ `juqiRelease.entitlements` æ–‡ä»¶å·²æ·»åŠ åˆ°é¡¹ç›®ä¸­

**æ³¨æ„**ï¼š
- ä¸éœ€è¦åŒ…å« `https://` å’Œè·¯å¾„
- åªéœ€è¦åŸŸåéƒ¨åˆ†ï¼š`juqi.life`
- æ ¼å¼ï¼š`applinks:åŸŸå`

### 3. ä¿®å¤ apple-app-site-association æ–‡ä»¶çš„ Content-Typeï¼ˆé‡è¦ï¼ï¼‰

**å½“å‰çŠ¶æ€**ï¼šæ–‡ä»¶å·²ä¸Šä¼ ï¼Œä½† Content-Type æ˜¯ `application/octet-stream`ï¼Œéœ€è¦æ”¹ä¸º `application/json`

**é—®é¢˜**ï¼šè®¿é—®æ–‡ä»¶æ—¶æµè§ˆå™¨ä¼šæç¤ºä¸‹è½½ï¼Œè€Œä¸æ˜¯æ˜¾ç¤º JSON å†…å®¹

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è®¿é—®è…¾è®¯äº‘ COS æ§åˆ¶å°ï¼šhttps://console.cloud.tencent.com/cos/bucket?bucket=a0d1-static-prod-juqi-7glu2m8qfa31e13f-1314478640&region=ap-shanghai
2. æ‰¾åˆ°æ–‡ä»¶ï¼š`.well-known/apple-app-site-association`
3. ç‚¹å‡»"è¯¦æƒ…" â†’ ä¿®æ”¹å…ƒæ•°æ® â†’ è®¾ç½® `Content-Type` ä¸º `application/json`
4. ä¿å­˜

**æˆ–è€…**ï¼šåˆ é™¤æ–‡ä»¶åé‡æ–°ä¸Šä¼ ï¼Œåœ¨ä¸Šä¼ æ—¶è®¾ç½® Content-Type ä¸º `application/json`

## ğŸ“‹ é…ç½®éªŒè¯æ¸…å•

### ä»£ç é…ç½®
- [x] URL Scheme å·²é…ç½®ï¼ˆ`wxde953a2ec5493b3b`ï¼‰
- [ ] AppDelegate.swift ä¸­çš„ AppID å·²æ›¿æ¢ï¼ˆéœ€è¦ä¿®æ”¹ï¼‰
- [x] Universal Link å·²é…ç½®ï¼ˆ`https://juqi.life/app/`ï¼‰
- [ ] Associated Domains å·²åœ¨ Xcode ä¸­é…ç½®ï¼ˆéœ€è¦åœ¨ Xcode ä¸­æ“ä½œï¼‰

### æœåŠ¡å™¨é…ç½®
- [x] apple-app-site-association æ–‡ä»¶å·²ä¸Šä¼ 
- [ ] Content-Type å·²ä¿®å¤ä¸º `application/json`ï¼ˆéœ€è¦ä¿®æ”¹ï¼‰
- [x] è‡ªå®šä¹‰åŸŸåå·²é…ç½®
- [x] SSL è¯ä¹¦å·²é…ç½®

### å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®
- [ ] Bundle ID å·²é…ç½®ï¼ˆéœ€è¦åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ç¡®è®¤ï¼‰
- [ ] Universal Links å·²é…ç½®ï¼ˆéœ€è¦åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°ç¡®è®¤ï¼‰

## ğŸ” éªŒè¯æ­¥éª¤

### 1. éªŒè¯ AppDelegate.swift

æ£€æŸ¥ `AppDelegate.swift` ç¬¬ 14 è¡Œï¼š
```swift
private let wechatAppID = "de953a2ec5493b3b"  // âœ… åº”è¯¥æ˜¯è¿™ä¸ª
```

### 2. éªŒè¯ Associated Domains

åœ¨ Xcode ä¸­ï¼š
1. é€‰æ‹©é¡¹ç›® Target `juqi`
2. é€‰æ‹© `Signing & Capabilities` æ ‡ç­¾é¡µ
3. ç¡®è®¤ `Associated Domains` å·²æ·»åŠ 
4. ç¡®è®¤æ˜¾ç¤ºï¼š`applinks:juqi.life`

### 3. éªŒè¯ Content-Type

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```bash
curl -I https://juqi.life/.well-known/apple-app-site-association | grep -i content-type
```

åº”è¯¥çœ‹åˆ°ï¼š`content-type: application/json`

æˆ–è€…åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
```
https://juqi.life/.well-known/apple-app-site-association
```

åº”è¯¥ç›´æ¥æ˜¾ç¤º JSON å†…å®¹ï¼Œè€Œä¸æ˜¯ä¸‹è½½ã€‚

### 4. éªŒè¯å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®

è®¿é—®ï¼šhttps://open.weixin.qq.com/

ç¡®è®¤ï¼š
- [ ] Bundle ID ä¸ Xcode é¡¹ç›®ä¸­çš„ Bundle Identifier ä¸€è‡´
- [ ] Universal Links å·²é…ç½®ä¸ºï¼š`https://juqi.life/app/`

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### ä¼˜å…ˆçº§ 1ï¼šå¿…é¡»å®Œæˆï¼ˆå¦åˆ™åŠŸèƒ½æ— æ³•å·¥ä½œï¼‰

1. **æ›¿æ¢ AppDelegate.swift ä¸­çš„ AppID**
   - æ–‡ä»¶ï¼š`JUQI-APP/juqi/juqi/AppDelegate.swift`
   - å°† `YOUR_WECHAT_APP_ID` æ”¹ä¸º `de953a2ec5493b3b`

2. **åœ¨ Xcode ä¸­é…ç½® Associated Domains**
   - åœ¨ `Signing & Capabilities` ä¸­æ·»åŠ  `applinks:juqi.life`

3. **ä¿®å¤ Content-Type**
   - åœ¨ COS æ§åˆ¶å°ä¿®æ”¹æ–‡ä»¶çš„ Content-Type ä¸º `application/json`

### ä¼˜å…ˆçº§ 2ï¼šå»ºè®®å®Œæˆï¼ˆç¡®ä¿åŠŸèƒ½æ­£å¸¸ï¼‰

4. **éªŒè¯å¾®ä¿¡å¼€æ”¾å¹³å°é…ç½®**
   - ç¡®è®¤ Bundle ID æ­£ç¡®
   - ç¡®è®¤ Universal Links å·²é…ç½®

5. **åœ¨çœŸæœºä¸Šæµ‹è¯•**
   - æµ‹è¯•å¾®ä¿¡ç™»å½•æµç¨‹
   - æµ‹è¯• Universal Links

## ğŸ“ é…ç½®æ‘˜è¦

| é…ç½®é¡¹ | å½“å‰å€¼ | çŠ¶æ€ |
|--------|--------|------|
| URL Scheme | `wxde953a2ec5493b3b` | âœ… å·²é…ç½® |
| AppDelegate AppID | `YOUR_WECHAT_APP_ID` | âŒ éœ€è¦æ›¿æ¢ä¸º `de953a2ec5493b3b` |
| Universal Link | `https://juqi.life/app/` | âœ… å·²é…ç½® |
| Associated Domains | `applinks:juqi.life` | â³ éœ€åœ¨ Xcode ä¸­é…ç½® |
| Content-Type | `application/octet-stream` | âŒ éœ€è¦æ”¹ä¸º `application/json` |
| apple-app-site-association | å·²ä¸Šä¼  | âœ… å·²ä¸Šä¼  |

## âš ï¸ é‡è¦æé†’

1. **AppDelegate.swift ä¸­çš„ AppID å¿…é¡»æ›¿æ¢**ï¼Œå¦åˆ™å¾®ä¿¡ç™»å½•æ— æ³•å·¥ä½œ
2. **Associated Domains å¿…é¡»åœ¨ Xcode ä¸­é…ç½®**ï¼Œå¦åˆ™ Universal Links æ— æ³•å·¥ä½œ
3. **Content-Type å¿…é¡»ä¿®å¤**ï¼Œå¦åˆ™ Apple æ— æ³•éªŒè¯ Universal Links
4. **æµ‹è¯•å¿…é¡»åœ¨çœŸæœºä¸Šè¿›è¡Œ**ï¼Œæ¨¡æ‹Ÿå™¨å¯èƒ½ä¸å®Œå…¨æ”¯æŒ
