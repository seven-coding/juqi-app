# 自定义域名 404 问题解决方案

## 🔍 问题分析

**问题**：`juqi.life` 域名访问返回 404

**原因分析**：
1. **域名未正确关联到静态网站托管**：虽然域名已配置，但可能没有关联到云开发静态网站托管
2. **DNS 解析指向错误**：DNS 可能指向了其他服务器（nginx），而不是云开发的静态网站托管
3. **域名配置在其他服务**：域名可能配置在云服务器或其他服务上，而不是静态网站托管

## ✅ 解决方案

### 方案一：在云开发控制台确认域名关联（最重要）

1. **访问云开发控制台**
   - 访问：https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting

2. **检查自定义域名配置**
   - 进入"静态网站托管"页面
   - 找到"自定义域名"或"域名管理"
   - 确认 `juqi.life` 是否在列表中
   - 确认状态是否为"已启用"或"正常"

3. **如果域名不在列表中**
   - 点击"添加域名"
   - 输入域名：`juqi.life`
   - 选择或申请 SSL 证书
   - 等待配置生效

4. **如果域名在列表中但状态异常**
   - 检查域名状态
   - 确认 SSL 证书是否正常
   - 确认 DNS 解析是否正确

### 方案二：检查 DNS 解析

在终端执行：
```bash
nslookup juqi.life
```

**预期结果**：
- 应该看到 CNAME 记录指向云开发的地址
- 例如：`juqi.life.cdn.dnsv1.com` 或类似格式

**如果指向其他地址**：
- 需要修改 DNS 解析
- 在域名服务商处，将 CNAME 记录改为云开发提供的地址

### 方案三：确认域名配置位置

**可能的情况**：
1. 域名配置在云服务器上（nginx）
2. 域名配置在其他 CDN 服务上
3. 域名配置在云开发静态网站托管上（正确位置）

**检查方法**：
- 查看 DNS 解析记录
- 查看云开发控制台的域名列表
- 确认域名应该关联到静态网站托管

## 📝 详细操作步骤

### 步骤 1：检查云开发控制台

1. 访问：https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting
2. 查看"自定义域名"列表
3. 确认 `juqi.life` 是否在列表中

### 步骤 2：如果域名不在列表中

1. 点击"添加域名"
2. 输入：`juqi.life`
3. 选择 SSL 证书（或申请新证书）
4. 记录 CNAME 地址
5. 配置 DNS 解析

### 步骤 3：配置 DNS 解析

在域名服务商处（如腾讯云 DNS、阿里云 DNS）：

1. 找到 `juqi.life` 的 DNS 解析记录
2. 确认记录类型为 `CNAME`
3. 确认记录值指向云开发提供的 CNAME 地址
4. 如果不对，修改为正确的 CNAME 地址

### 步骤 4：等待生效

- DNS 解析：通常 5-30 分钟
- SSL 证书：如果自动申请，可能需要几分钟
- CDN 缓存：可能需要几分钟刷新

## 🔍 验证步骤

### 1. 验证 DNS 解析

```bash
nslookup juqi.life
```

应该看到 CNAME 记录指向云开发的地址。

### 2. 验证域名访问

```bash
curl -I https://juqi.life/.well-known/apple-app-site-association
```

**预期结果**：
- HTTP 200（不是 404）
- Content-Type: application/json
- 服务器应该是云开发的服务器（不是 nginx）

### 3. 验证文件内容

在浏览器中访问：
```
https://juqi.life/.well-known/apple-app-site-association
```

应该直接显示 JSON 内容。

## ⚠️ 重要提示

1. **域名必须关联到静态网站托管**：如果域名配置在其他服务上，需要重新配置
2. **DNS 解析必须正确**：CNAME 记录必须指向云开发的地址
3. **等待生效时间**：DNS 和 SSL 证书配置可能需要几分钟到几小时生效

## 🚀 快速检查清单

- [ ] 在云开发控制台确认 `juqi.life` 在自定义域名列表中
- [ ] 确认域名状态为"已启用"或"正常"
- [ ] 确认 DNS 解析指向云开发的 CNAME 地址
- [ ] 等待 DNS 和 SSL 证书生效
- [ ] 验证域名可以访问文件

## 🔗 相关链接

- **静态网站托管控制台**: https://tcb.cloud.tencent.com/dev?envId=prod-juqi-7glu2m8qfa31e13f#/static-hosting
- **默认域名（可访问）**: https://prod-juqi-7glu2m8qfa31e13f-1314478640.tcloudbaseapp.com/.well-known/apple-app-site-association
- **自定义域名（404）**: https://juqi.life/.well-known/apple-app-site-association

## 💡 临时解决方案

如果自定义域名暂时无法修复，可以：

1. **使用默认域名**：
   - Universal Links 可以通过默认域名工作
   - 在 `AppDelegate.swift` 中暂时使用默认域名
   - 等自定义域名修复后再切换

2. **或者等待修复**：
   - 先完成其他配置
   - 在真机上测试功能
   - 等自定义域名修复后再测试 Universal Links
