# JUQI iOS App 项目

## 项目说明

这是JUQI iOS原生App的开发项目，所有App相关的内容都在此文件夹中。

**核心目标**:
- 开发iOS原生App版本
- 与小程序数据完全统一
- 仅支持核心功能
- 不影响小程序现有功能

## 项目结构

```
juqi-app/
├── README.md                    # 项目说明文档
├── App接口文档.md              # App接口文档（接口范围和分类）
├── docs/                        # 文档目录
│   ├── 接口架构设计.md         # 接口架构设计文档
│   ├── 接口清单确认.md         # 接口清单确认文档
│   └── 接口映射关系.md         # App接口与现有云函数映射关系
├── ios/                         # iOS项目代码（后续创建）
└── cloudfunctions/              # App专用云函数（后续创建）
    └── appApi/                  # App接口统一入口
```

## 开发计划

### 阶段一：接口梳理和架构设计 ✅
- [x] 梳理接口范围和边界
- [x] 创建接口文档框架
- [x] 创建接口架构设计文档
- [x] 创建接口映射关系文档
- [x] 创建接口清单确认文档
- [ ] **待确认**: 接口清单和分类

### 阶段二：云函数开发（待开始）
- [ ] 创建appApi云函数结构
- [ ] 实现Token验证机制
- [ ] 实现统一响应格式
- [ ] 实现接口模块（按优先级）
  - [ ] 用户认证模块
  - [ ] 用户信息模块
  - [ ] 动态模块
  - [ ] 圈子模块
  - [ ] 消息模块
  - [ ] 搜索模块
  - [ ] 上传模块

### 阶段三：iOS App开发（待开始）
- [ ] 创建iOS项目结构
- [ ] 实现网络层（API调用）
- [ ] 实现Token管理
- [ ] 实现核心功能页面
  - [ ] 登录页面
  - [ ] 首页（动态列表）
  - [ ] 动态详情页
  - [ ] 发布动态页
  - [ ] 用户主页
  - [ ] 消息页面
- [ ] 实现会员状态同步

## 接口统计

- **总接口数**: 34个
- **需要Token**: 31个
- **无需Token**: 3个
- **返回会员状态**: 4个

### 接口分类
1. **用户认证类**: 3个接口
2. **用户信息类**: 4个接口
3. **动态类**: 7个接口
4. **圈子类**: 5个接口
5. **消息类**: 5个接口
6. **搜索类**: 3个接口
7. **文件上传类**: 2个接口
8. **其他功能类**: 5个接口

## 重要原则

1. **接口隔离**: App接口与小程序接口完全独立，通过新建`appApi`云函数统一入口
2. **数据统一**: App与小程序共享数据库，确保数据完全一致
3. **会员同步**: 会员状态必须与小程序完全一致，所有返回用户信息的接口必须包含会员状态
4. **不影响小程序**: 所有开发不能影响小程序功能，通过`source='app'`参数隔离

## 接口架构

### 调用流程
```
iOS App客户端
    ↓
appApi云函数（新建，App专用入口）
    ↓
Token验证（需要认证的接口）
    ↓
路由到对应模块
    ↓
调用现有云函数（通过source='app'参数隔离）
    ↓
共享数据库
```

### 接口入口
- **云函数名称**: `appApi`
- **调用方式**: 通过`operation`参数指定接口名称
- **Token验证**: 需要认证的接口必须携带Token

## 相关文档

- [App接口文档](./App接口文档.md) - 接口定义和说明（34个接口）
- [接口架构设计](./docs/接口架构设计.md) - 详细的架构设计文档
- [接口清单确认](./docs/接口清单确认.md) - 接口清单和确认事项
- [接口映射关系](./docs/接口映射关系.md) - App接口与现有云函数的映射关系
- [开发计划](../.cursor/plans/) - 详细开发计划

## 下一步

1. **确认接口清单**: 请查看[接口清单确认文档](./docs/接口清单确认.md)，确认接口范围、分类和优先级
2. **开始开发**: 确认后开始创建appApi云函数结构
3. **逐步实现**: 按优先级逐步实现各个接口

## 注意事项

⚠️ **重要提醒**:
- 接口参数将在开发时补充，当前文档只包含接口框架
- 所有接口必须返回会员状态（返回用户信息的接口）
- 接口完全隔离，不影响小程序现有功能
- 数据一致性必须确保App和小程序数据完全一致
