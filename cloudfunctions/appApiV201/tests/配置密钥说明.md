# 配置密钥说明

## 当前状态

✅ **已提供**:
- SecretId: `YOUR_SECRET_ID`
- 环境ID: `test-juqi-3g1m5qa7cc2737a1`（已配置）

⚠️ **还需要**:
- SecretKey（需要从腾讯云控制台获取）

## 配置方法

### 方法1: 使用环境变量（推荐）

在运行测试前，设置环境变量：

```bash
export TENCENT_SECRET_ID="YOUR_SECRET_ID"
export TENCENT_SECRET_KEY="你的SecretKey"
export TCB_ENV_ID="test-juqi-3g1m5qa7cc2737a1"

# 然后运行测试
node tests/run-all-tests.js
```

### 方法2: 创建 .env 文件

在 `JUQI-APP/cloudfunctions/appApi/` 目录下创建 `.env` 文件：

```bash
TCB_ENV_ID=test-juqi-3g1m5qa7cc2737a1
TENCENT_SECRET_ID=YOUR_SECRET_ID
TENCENT_SECRET_KEY=你的SecretKey
```

**注意**: `.env` 文件包含敏感信息，不要提交到代码仓库！

### 方法3: 在微信开发者工具中运行（最简单）

**无需配置密钥**，微信开发者工具会自动处理认证。

1. 打开微信开发者工具
2. 打开项目 `JUQI-APP`
3. 在终端运行：
   ```bash
   cd cloudfunctions/appApi
   node tests/run-all-tests.js
   ```

## 获取 SecretKey

如果还没有 SecretKey，请：

1. 访问：https://console.cloud.tencent.com/cam/capi
2. 找到对应的 SecretId（`YOUR_SECRET_ID`）
3. 点击"显示"查看 SecretKey
4. 如果看不到，可能需要创建新的密钥对

## 测试代码已更新

✅ 测试代码已更新，支持通过环境变量读取密钥：
- `tests/utils/test-helper.js` 已更新
- 会自动检测环境变量并使用

## 运行测试

配置好 SecretKey 后，运行：

```bash
cd JUQI-APP/cloudfunctions/appApi
node tests/run-all-tests.js
```

---

**更新时间**: 2026-01-15
